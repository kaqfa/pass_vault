{% extends "layouts/authenticated_content.html" %}
{% load static %}

{% block page_title %}{% if is_create %}Create New Group{% else %}Edit Group{% endif %}{% endblock %}

{% block authenticated_content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6">
        <h2 class="text-2xl font-bold tracking-tight">
            {% if is_create %}Create New Group{% else %}Edit Group{% endif %}
        </h2>
        <p class="text-muted-foreground">
            {% if is_create %}Create a new group to share passwords with your team.{% else %}Update your group details.{% endif %}
        </p>
    </div>

    <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}
            
            {% if errors.non_field_errors %}
                <div class="rounded-md bg-destructive/15 p-3 text-sm text-destructive">
                    {% for error in errors.non_field_errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="space-y-4">
                <!-- Name -->
                <div class="space-y-2">
                    <label for="name" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">
                        Group Name
                    </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-muted-foreground"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2Z"/></svg>
                        </div>
                         <input
                            type="text"
                            name="name"
                            id="name"
                            value="{{ form_data.name|default:group.name|default:'' }}"
                            placeholder="e.g. Marketing Team"
                            class="flex h-10 w-full rounded-md border border-input bg-transparent pl-9 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                            required
                        >
                    </div>
                    {% if errors.name %}
                        <p class="text-sm font-medium text-destructive">{{ errors.name.0 }}</p>
                    {% endif %}
                </div>

                <!-- Description -->
                <div class="space-y-2">
                    <label for="description" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">
                        Description
                    </label>
                    <textarea
                        name="description"
                        id="description"
                        rows="4"
                        placeholder="Describe the purpose of this group..."
                        class="flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                    >{{ form_data.description|default:group.description|default:'' }}</textarea>
                    {% if errors.description %}
                        <p class="text-sm font-medium text-destructive">{{ errors.description.0 }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- Actions -->
            <div class="flex items-center justify-end gap-2 pt-4 border-t">
                <a href="{% url 'groups:list' %}" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                    Cancel
                </a>
                <button type="submit" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                    {% if is_create %}Create Group{% else %}Update Group{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}